---
import { Image } from '@datocms/astro/Image';
import type { AssetImage } from '~/lib/datocms/types';

type Props = {
  name: string;
  slug: string;
  description?: string | null;
  booksCount: number;
  logo?: AssetImage | null;
};

const { name, slug, description, booksCount, logo }: Props = Astro.props;
const booksLabel = booksCount === 1 ? 'Libro' : 'Libri';
const logoResponsiveImage = logo?.responsiveImage
  ? { ...logo.responsiveImage, alt: logo.responsiveImage.alt ?? name }
  : null;
---

<a
  href={`/collane/${slug}`}
  class="group block focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-sky focus-visible:ring-offset-2"
>
  <article
    class="flex h-full flex-col bg-white/95 p-8 text-center shadow-soft ring-1 ring-brand-navy/5 transition duration-200 ease-out group-hover:-translate-y-1 group-hover:shadow-2xl"
  >
    <div class="flex flex-1 flex-col items-center gap-6">
      {
        logoResponsiveImage ? (
          <div class="flex h-32 w-full items-center justify-center bg-brand-mist/50 p-10">
            <Image
              data={logoResponsiveImage}
              sizes="(min-width: 1280px) 320px, (min-width: 768px) 40vw, 80vw"
              imgClass="h-full w-auto object-contain"
            />
          </div>
        ) : (
          <div class="flex h-32 w-full items-center justify-center bg-brand-mist/50 p-4 text-sm uppercase tracking-wide text-brand-slate">
            Logo in arrivo
          </div>
        )
      }

      <div class="flex flex-1 flex-col gap-3">
        <h3 class="text-2xl font-serif text-brand-navy">{name}</h3>
        <p class="text-sm font-semibold uppercase tracking-wide text-brand-navy">
          {booksCount}
          {booksLabel}
        </p>
        {
          description ? (
            <p class="text-sm leading-relaxed text-brand-charcoal/80">{description}</p>
          ) : (
            <p class="text-sm leading-relaxed text-brand-charcoal/60">
              Descrizione in aggiornamento.
            </p>
          )
        }
      </div>
    </div>
  </article>
</a>
